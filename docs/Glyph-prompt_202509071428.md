# スプリント2

**User:** Anonymous (sunpin32@yahoo.co.jp)  
**Created:** 8/26/2025 19:06:41  
**Updated:** 9/7/2025 14:26:48  
**Exported:** 9/7/2025 14:28:05  
**Link:** [https://chatgpt.com/g/g-p-68a2428917408191ab595311b37e4516-itabashi-minutes/c/68ad872e-c17c-8323-8da9-03d735ff82cd](https://chatgpt.com/g/g-p-68a2428917408191ab595311b37e4516-itabashi-minutes/c/68ad872e-c17c-8323-8da9-03d735ff82cd)  

## Response:
思考時間: 27s

ドキュメントを読み込んでいます

ドキュメントを読み込んでいます

ステップ6におけるレポートには適切なファイル引用があります。これで、ステップ7に進む準備が整ったと確認し、「動作確認コマンド（Codex 実行用）」という第7ステップ用のプロンプトを提案します。READMEの更新やスクリプト、Smoke APIの実行も確認が必要です。

ステップ6のレビュー後、各部分に適切な引用を追加（例: README、コマンド、スクリプト追加）。次に、ステップ7のプロンプトを整理します。Codexを使って「Verification Cheatsheet」セクションを生成し、コマンドの確認を行います。シンプルな「make verify」スクリプトも提案します。

まず、ステップ6の確認と引用を短くまとめます。その後、ステップ7のプロンプトを提案します。その中で、READMEに「Verification Cheatsheet」セクションを追加し、コマンドやAPIのスモークテストを含めます。スクリプト「smoke\_api.py」の実装が進んでいない場合は、オプションとして提案します。

完了

確認した。\*\*Step 6 は合格（承認）\*\*でOK。報告書どおり、

*   READMEに **Quick Start（fixtures前提）** を追記し、`catalog-load`→`api-serve`→代表クエリ3本の流れがコピペで通る状態、整形/型チェックの統一コマンドも明記されています。Codex-result\_202509071422 Codex-result\_202509071422
*   CIは **Blackのチェックを段階的導入**（対象を `ingest catalog api scripts tests` に限定）。既存の flake8/mypy/pytest は変更なし。Codex-result\_202509071422
*   Poetry scripts は `catalog-load` / `api-serve` が **未登録だったため追加**（重複回避）。Codex-result\_202509071422
*   受入基準（CIグリーン、Quick Startがコピペで通る）を満たした旨の記録あり。Codex-result\_202509071422

問題なし。**Step 7** に進もう。

* * *

Codex 指示 — Step 7: 動作確認コマンド（README末尾に追記）
========================================

目的
--

*   スプリント2の最終確認として、誰でも**コピペ一発**でローカル検証できる「Verification Cheatsheet」を README 末尾に追記する。
*   既存の Quick Start と整合（fixtures前提・`catalog-load` / `api-serve` を使用）。Codex-result\_202509071422 Codex-result\_202509071422

変更点
---

*   `README.md` の末尾に “Verification Cheatsheet (Sprint 2)” セクションを新設し、以下を**そのまま貼れるコードブロック**で追加。

````md
## Verification Cheatsheet (Sprint 2)

> Copy & paste OK / fixtures-based

```bash
# 0) Lint / Type (optional but recommended)
poetry run black .
poetry run mypy .
# Ruff is optional; run only if installed
poetry run ruff check . || true
````

```bash
# 1) Build catalog (fixtures)
rm -f var/minutes.db && mkdir -p var
sqlite3 var/minutes.db < catalog/schema.sql
poetry run catalog-load --db var/minutes.db --src tests/fixtures
```

```bash
# 2) Serve API (in another terminal)
poetry run api-serve --db var/minutes.db --host 127.0.0.1 --port 8000
```

```bash
# 3) Smoke via curl
curl "http://127.0.0.1:8000/search?q=高島平"
curl "http://127.0.0.1:8000/search?committee=文教児童委員会&date_from=2025-08-01&date_to=2025-08-31"
curl "http://127.0.0.1:8000/document/1"
```

```bash
# 4) (Optional) Rebuild script – fresh & stats
poetry run python scripts/rebuild_catalog.py --db var/minutes.db --src tests/fixtures --fresh --analyze --vacuum --verbose
```

```

## 注意
- 既存の Quick Start と内容が二重にならないよう、**“Cheatsheet = 要約（まとめ）”** の位置づけで追記すること。:contentReference[oaicite:7]{index=7}  
- コマンドは**fixturesを既定**とし、実データに差し替える場合の注記（`--src data/normalized/` など）は一文だけ補足。:contentReference[oaicite:8]{index=8}

## 受入基準（DoD）
- README に “Verification Cheatsheet (Sprint 2)” が追加され、**コピペで成功**する。:contentReference[oaicite:9]{index=9}  
- 既存の Quick Start と矛盾なし（同じ手順・同じコマンド）。:contentReference[oaicite:10]{index=10}  
- CI 定義への変更は**無し**（文書のみの更新）。

---

準備でき次第、Codexに上の指示を投げてください。マージ後に最終チェック（README末尾のコマンドがそのまま通るか）を見ます。
```



---
Powered by [ChatGPT Exporter](https://www.chatgptexporter.com)