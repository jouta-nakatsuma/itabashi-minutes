# タスク: Streamlit UI v0.1 実装

## 目的
Itabashi Minutes の検索結果をブラウザで直感的に閲覧できる最小UIを実装する。  
API v0.2 (`/search`, `/document/{id}`) をフロントエンドから呼び出し、検索→一覧→詳細までを確認できる。

## 実装要件
1. **アプリエントリ**
   - `app/streamlit_app.py` を新規作成。
   - `main()` 関数をエントリポイントに。
   - `pyproject.toml` の `[tool.poetry.scripts]` に  
     `ui-serve = "app.streamlit_app:main"` を追加。

2. **画面構成**
   - **検索フォーム**：
     - キーワード入力 (`q`)
     - フィルタ：年度（date_from/date_to）、委員会名（committee）、話者（speaker）
     - 並び替えオプション：`date|committee|relevance` ＋ asc/desc
     - limit/offset は内部でページャと連動
   - **一覧表示**：
     - API `/search` を呼び出し、タイトル・日付・委員会・スニペットを表形式またはカード形式で表示
     - ヒット箇所は `<em>` タグを太字または色付けで強調表示
     - ページャ（次/前ページ）を実装（API の `page`, `has_next` を利用）
   - **詳細表示**：
     - 行クリックで `/document/{id}` を呼び出し、メタ情報（date, committee, title）と抽出テキスト全文を表示
     - 「PDFを開く」外部リンクボタンを配置

3. **UIの利用性**
   - Streamlit の `st.form`, `st.text_input`, `st.selectbox`, `st.date_input`, `st.button` を利用
   - ページ切替は `st.session_state` を使い保持
   - スニペットの `<em>` を `st.markdown(unsafe_allow_html=True)` でレンダリング

4. **エラーハンドリング**
   - API が失敗したら `st.error()` で通知
   - レスポンスが空なら「結果なし」と表示

## テスト要件
- `poetry run ui-serve` でUIが起動し、フォーム入力からAPI呼び出しが成功する。
- 「給食」などのクエリで、スニペットに `<em>` 強調が反映されている。
- ページャで前後のページに移動できる。
- 詳細ビューで抽出テキストとPDFリンクが確認できる。

## 変更対象
- 新規: `app/streamlit_app.py`
- 更新: `pyproject.toml` ([tool.poetry.scripts] に `ui-serve` 追加)

## Done条件
- ローカルで `poetry run ui-serve` を実行 → ブラウザで検索→一覧→詳細が一通り操作できる。
- CIのpytestでエラーが出ない。
