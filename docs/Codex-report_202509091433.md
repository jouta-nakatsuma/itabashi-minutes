# Codex Report — 2025-09-09 14:33 JST

Scope
- Sprint 3 最終段階の締め作業（検証ドキュメント整備、Issue棚卸し、Nightly状況確認）。

What I did
- #34 実施（PR #42）
  - 追加: docs/Verification-Cheatsheet_Sprint3.md（API/UI/MCP/Nightly/抽出テストの横断チェック）
  - 追加: scripts/verify_sprint3.sh（API/MCPのクイックスモーク）
  - README: Cheatsheet への導線を追記
- Issue棚卸し
  - #22→#33, #23→#29, #24→#31, #25→#32 と重複確認のうえ duplicate コメント付きでClose
- Nightlyの状況確認
  - #41: Nightly failed 2025-09-08 がOpen（Artifacts: nightly-logs-2025-09-08）
  - 直近の実行: gh run list --workflow Nightly --limit 5 で failure を確認

Current Status
- Sprint 3 の機能（API v0.2 / UI v0.1 / MCP v0.1 / Nightly / 抽出テスト）は整備済み。
- 未解決は #41 のNightly失敗（単発の可能性）。今夜の実行を監視、連続失敗なら対処。

Nightly Triage (Playbook)
```bash
# 実行状況
gh run list --workflow Nightly --limit 5

# 失敗日のログ取得（例）
gh run download --name "nightly-logs-YYYY-MM-DD"
sed -n '1,200p' nightly.out
sed -n '1,200p' logs/nightly.log

# 手動再実行（main）
gh workflow run Nightly --ref main && gh run watch
```
- 典型原因と対応
  - 429/5xx/timeout: バックオフ/リトライを緩和、単発なら様子見
  - HTML変化: crawlerセレクタ調整 + responsesテスト追加
  - Artifacts未生成: パス/権限見直し（if-no-files-found: errorで検知）

Verification Cheatsheet（Sprint 3）
- 目的: 5〜10分で横断チェック
- 代表手順:
  - DB用意（Nightly or 簡易クロール）
  - API起動→/search（<em>/ページング）
  - UI起動→検索/ページャ/詳細
  - MCP→[MCP] ... ready / JSON-RPCワンライナー
  - Nightly→手動実行/Artifacts ダウンロード
  - 抽出回帰→ pytest -q -k structure_extractor

Next Steps
- #41 監視（次のNightly）。連続失敗時はログから対象箇所（crawler/構築/Artifacts）を特定・最小修正。
- 必要に応じ Docs のトラブルシュート拡充（原因特定後に追記）。

Links
- PR #42: docs(verify) & scripts & README link
- Issues: #34 完了、#22/#23/#24/#25 duplicate Close、#41 Open（Nightly）

